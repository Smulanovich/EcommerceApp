{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect}from\"react\";import axios from\"axios\";import{useNavigate,useLocation}from\"react-router-dom\";import{UserContext}from\"../User/UserProvider\";import\"./OrderHistory.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var OrderHistory=function OrderHistory(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),orders=_React$useState2[0],setOrders=_React$useState2[1];var navigate=useNavigate();var _useContext=useContext(UserContext),user=_useContext.user;var email=user===null||user===void 0?void 0:user.email;var location=useLocation();useEffect(function(){var fetchOrderHistory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,orderHistory;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:4000/api/users/\".concat(email,\"/history\"),{email:email});case 3:response=_context.sent;orderHistory=response.data;if(!orderHistory){console.log(\"No order history found for user\");}else{console.log(\"Order history found for user\");setOrders(orderHistory);}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Error getting order history:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchOrderHistory(){return _ref.apply(this,arguments);};}();fetchOrderHistory();},[email,location]);if(!orders||orders.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"orderHistory\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"You have no orders!\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"orderHistory\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"order-h1\",children:\"Your Orders:\"}),orders.map(function(order,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"order-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"order-h3\",children:[\"Order: \",order._id]}),/*#__PURE__*/_jsx(\"ul\",{className:\"order-ul\",children:order.orderArray.map(function(_ref2){var _ref3=_slicedToArray(_ref2,2),item=_ref3[0],quantity=_ref3[1];return/*#__PURE__*/_jsxs(\"li\",{className:\"order-li\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"order-img\",src:item.image_address,alt:item.name}),/*#__PURE__*/_jsx(\"h4\",{children:item.name.toUpperCase()}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",item.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Quantity: \",quantity]})]},item._id);})})]},order._id);})]});};export default OrderHistory;","map":{"version":3,"names":["React","useContext","useEffect","axios","useNavigate","useLocation","UserContext","jsx","_jsx","jsxs","_jsxs","OrderHistory","_React$useState","useState","_React$useState2","_slicedToArray","orders","setOrders","navigate","_useContext","user","email","location","fetchOrderHistory","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","orderHistory","wrap","_callee$","_context","prev","next","get","concat","sent","data","console","log","t0","error","stop","apply","arguments","length","className","children","map","order","index","_id","orderArray","_ref2","_ref3","item","quantity","src","image_address","alt","name","toUpperCase","price"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/User/OrderHistory.jsx"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { UserContext } from \"../User/UserProvider\";\r\nimport \"./OrderHistory.css\";\r\n\r\nconst OrderHistory = () => {\r\n  const [orders, setOrders] = React.useState([]);\r\n  const navigate = useNavigate();\r\n  const { user } = useContext(UserContext);\r\n\r\n  const email = user?.email;\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const fetchOrderHistory = async () => {\r\n      try {\r\n        const response = await axios.get(`http://localhost:4000/api/users/${email}/history`, { email });\r\n        const orderHistory = response.data;\r\n\r\n        if (!orderHistory) {\r\n          console.log(\"No order history found for user\");\r\n        } else {\r\n          console.log(\"Order history found for user\");\r\n          setOrders(orderHistory);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error getting order history:\", error);\r\n      }\r\n    };\r\n\r\n    fetchOrderHistory();\r\n  }, [email, location]);\r\n\r\n  if (!orders || orders.length === 0) {\r\n    return (\r\n      <div className=\"orderHistory\">\r\n        <h1>You have no orders!</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"orderHistory\">\r\n      <h1 className=\"order-h1\">Your Orders:</h1>\r\n      {orders.map((order, index) => (\r\n        <div className=\"order-container\" key={order._id}>\r\n          <h3 className=\"order-h3\">Order: {order._id}</h3>\r\n          <ul className=\"order-ul\">\r\n            {order.orderArray.map(([item, quantity]) => (\r\n              <li className=\"order-li\" key={item._id}>\r\n                <img className=\"order-img\" src={item.image_address} alt={item.name} />\r\n                <h4>{item.name.toUpperCase()}</h4>\r\n                <p>Price: ${item.price}</p>\r\n                <p>Quantity: {quantity}</p>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderHistory;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}