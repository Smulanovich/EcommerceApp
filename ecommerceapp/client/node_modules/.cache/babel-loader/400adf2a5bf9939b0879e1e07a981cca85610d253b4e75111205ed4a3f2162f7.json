{"ast":null,"code":"import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var UserContext=/*#__PURE__*/createContext();function UserProvider(_ref){var children=_ref.children;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var userRef=useRef(null);// Now using local storage to persist user data\nuseEffect(function(){var storedUser=localStorage.getItem(\"user\");if(storedUser){var parsedUser=JSON.parse(storedUser);setUser(parsedUser);userRef.current=parsedUser;}},[]);var login=function login(user){setUser(user);userRef.current=user;localStorage.setItem(\"user\",JSON.stringify(user));};var logout=function logout(){setUser(null);userRef.current=null;localStorage.removeItem(\"user\");};return/*#__PURE__*/_jsx(UserContext.Provider,{value:{user:user,login:login,logout:logout},children:children});}export default UserProvider;","map":{"version":3,"names":["React","createContext","useState","useEffect","useRef","jsx","_jsx","UserContext","UserProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","userRef","storedUser","localStorage","getItem","parsedUser","JSON","parse","current","login","setItem","stringify","logout","removeItem","Provider","value"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/User/UserProvider.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useRef } from \"react\";\r\n\r\nexport const UserContext = createContext();\r\n\r\nfunction UserProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const userRef = useRef(null);\r\n\r\n  // Now using local storage to persist user data\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem(\"user\");\r\n    if (storedUser) {\r\n      const parsedUser = JSON.parse(storedUser);\r\n      setUser(parsedUser);\r\n      userRef.current = parsedUser;\r\n    }\r\n  }, []);\r\n\r\n  const login = (user) => {\r\n    setUser(user);\r\n    userRef.current = user;\r\n    localStorage.setItem(\"user\", JSON.stringify(user));\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    userRef.current = null;\r\n    localStorage.removeItem(\"user\");\r\n  };\r\n\r\n  return (\r\n    <UserContext.Provider\r\n      value={{\r\n        user,\r\n        login,\r\n        logout\r\n      }}\r\n    >\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default UserProvider;\r\n"],"mappings":"iNAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE1E,MAAO,IAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAE1C,QAAS,CAAAO,YAAYA,CAAAC,IAAA,CAAe,IAAZ,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAC9B,IAAAC,SAAA,CAAwBT,QAAQ,CAAC,IAAI,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IACpB,GAAM,CAAAI,OAAO,CAAGZ,MAAM,CAAC,IAAI,CAAC,CAE5B;AACAD,SAAS,CAAC,UAAM,CACd,GAAM,CAAAc,UAAU,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAC/C,GAAIF,UAAU,CAAE,CACd,GAAM,CAAAG,UAAU,CAAGC,IAAI,CAACC,KAAK,CAACL,UAAU,CAAC,CACzCF,OAAO,CAACK,UAAU,CAAC,CACnBJ,OAAO,CAACO,OAAO,CAAGH,UAAU,CAC9B,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAI,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAIV,IAAI,CAAK,CACtBC,OAAO,CAACD,IAAI,CAAC,CACbE,OAAO,CAACO,OAAO,CAAGT,IAAI,CACtBI,YAAY,CAACO,OAAO,CAAC,MAAM,CAAEJ,IAAI,CAACK,SAAS,CAACZ,IAAI,CAAC,CAAC,CACpD,CAAC,CAED,GAAM,CAAAa,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnBZ,OAAO,CAAC,IAAI,CAAC,CACbC,OAAO,CAACO,OAAO,CAAG,IAAI,CACtBL,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC,CACjC,CAAC,CAED,mBACEtB,IAAA,CAACC,WAAW,CAACsB,QAAQ,EACnBC,KAAK,CAAE,CACLhB,IAAI,CAAJA,IAAI,CACJU,KAAK,CAALA,KAAK,CACLG,MAAM,CAANA,MACF,CAAE,CAAAjB,QAAA,CAEDA,QAAQ,CACW,CAAC,CAE3B,CAEA,cAAe,CAAAF,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}