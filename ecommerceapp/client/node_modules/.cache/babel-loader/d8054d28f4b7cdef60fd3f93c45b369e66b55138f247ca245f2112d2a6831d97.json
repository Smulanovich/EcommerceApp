{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import'./SignIn.css';import{UserContext}from\"../../../pages/User/UserProvider.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate('');var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),failedLoginMsg=_useState6[0],setFailedLoginMsg=_useState6[1];var _useContext=useContext(UserContext),login=_useContext.login;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;console.log(\"email: \"+email);console.log(\"password: \"+password);_context.next=6;return axios.post('http://localhost:4000/api/login',{email:email,password:password});case 6:user=_context.sent;if(user.data){console.log(\"Authentication successful\");console.log(\"Data \",user.data);login(user.data);}else{console.log(\"Authentication failed\");setFailedLoginMsg(\"Login failed. Please try again.\");}_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.error(\"Error authenticating login:\",_context.t0);setFailedLoginMsg(\"Login failed. Please try again.\");case 14:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var goToRegister=function goToRegister(){navigate(\"/account/register\");};return/*#__PURE__*/_jsx(\"div\",{className:\"overallSignIn\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:failedLoginMsg}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(e){return setEmail(e.target.value);},type:\"email\",placeholder:\"youremail@email\",id:\"email\",name:\"email\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:function onChange(e){return setPassword(e.target.value);},type:\"password\",placeholder:\"********\",id:\"password\",name:\"password\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Log In\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"link-btn\",onClick:goToRegister,children:\"Don't have an account? Register here.\"})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useNavigate","axios","UserContext","jsx","_jsx","jsxs","_jsxs","Login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","navigate","_useState5","_useState6","failedLoginMsg","setFailedLoginMsg","_useContext","login","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","e","user","wrap","_callee$","_context","prev","next","preventDefault","console","log","post","sent","data","t0","error","stop","_x","apply","arguments","goToRegister","className","children","onSubmit","htmlFor","value","onChange","target","type","placeholder","id","name","onClick"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/User/Forms/Login.jsx"],"sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport './SignIn.css'\nimport { UserContext } from \"../../../pages/User/UserProvider.jsx\";\n\n\nconst Login = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate('');\n  const [failedLoginMsg, setFailedLoginMsg] = useState(''); \n  const { login } = useContext(UserContext);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      console.log(\"email: \" + email);\n      console.log(\"password: \" + password);\n      const user = await axios.post('http://localhost:4000/api/login', { email, password });\n\n      if (user.data) {\n        console.log(\"Authentication successful\");\n        console.log(\"Data \", user.data);\n        login (user.data);\n      } \n      else {\n        console.log(\"Authentication failed\");\n        setFailedLoginMsg(\"Login failed. Please try again.\");\n      }\n    } \n    catch (error) {\n      console.error(\"Error authenticating login:\", error);\n      setFailedLoginMsg(\"Login failed. Please try again.\");\n    }\n  };\n\n  const goToRegister = () => {\n    navigate(\"/account/register\");\n  };\n\n  return (\n    <div className=\"overallSignIn\">\n      <div className=\"auth-form-container\">\n        <h2>Login</h2>\n        <p>{failedLoginMsg}</p>\n        <form className=\"login-form\" onSubmit={handleSubmit}>\n          <label htmlFor=\"email\">Email</label>\n          <input\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            type=\"email\"\n            placeholder=\"youremail@email\"\n            id=\"email\"\n            name=\"email\"\n          />\n          <label htmlFor=\"password\">Password</label>\n          <input\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            type=\"password\"\n            placeholder=\"********\"\n            id=\"password\"\n            name=\"password\"\n          />\n          <button type=\"submit\">Log In</button>\n        </form>\n        <button className=\"link-btn\" onClick={goToRegister}>\n          Don't have an account? Register here.\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}