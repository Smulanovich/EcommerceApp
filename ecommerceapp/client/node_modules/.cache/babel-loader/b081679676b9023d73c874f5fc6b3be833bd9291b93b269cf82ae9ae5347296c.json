{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect,useState}from\"react\";import{Link,useNavigate,useLocation}from\"react-router-dom\";import CandyDisplay from\"../Products/CandyDisplay.jsx\";import axios from'axios';import{UserContext}from\"./UserProvider.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FavoriteProducts=function FavoriteProducts(){var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),favoriteProducts=_useState2[0],setFavoriteProducts=_useState2[1];var navigate=useNavigate();var location=useLocation();var GoToAccount=function GoToAccount(){navigate(\"/account\");};var removeFavorite=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(product){var removeSuccess;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:4000/api/users/favorite/\".concat(product.name,\"/remove\"),{userEmail:user.email,product:product});case 3:removeSuccess=_context.sent;if(removeSuccess){console.log(\"Removed from favorites\");setFavoriteProducts(function(prevProducts){return prevProducts.filter(function(p){return p.name!==product.name;});});}else{console.log(\"Failed to remove from favorites\");}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error removing from favorites:\",_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function removeFavorite(_x){return _ref.apply(this,arguments);};}();useEffect(function(){if(!user)return;axios.get(\"http://localhost:4000/api/users/\".concat(user.email,\"/favorites\")).then(function(response){setFavoriteProducts(response.data);}).catch(function(error){console.error(\"Error retrieving favorite products:\",error);});},[location,user]);if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"notLoggedIn\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"You are not logged in.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Please \",/*#__PURE__*/_jsx(Link,{to:\"/account\",children:\"login\"}),\" to view your favorite products.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:GoToAccount,children:\"Go to login page\"})]});}if(favoriteProducts.length===0){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"You currently do not have any favorite products\"})});}return/*#__PURE__*/_jsx(\"div\",{className:\"allProducts\",children:favoriteProducts.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"reviewProduct\",children:[/*#__PURE__*/_jsx(CandyDisplay,{product:product}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return removeFavorite(product);},children:\"Remove from Favorites\"})]});})});};export default FavoriteProducts;","map":{"version":3,"names":["React","useContext","useEffect","useState","Link","useNavigate","useLocation","CandyDisplay","axios","UserContext","jsx","_jsx","jsxs","_jsxs","FavoriteProducts","_useContext","user","_useState","_useState2","_slicedToArray","favoriteProducts","setFavoriteProducts","navigate","location","GoToAccount","removeFavorite","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","product","removeSuccess","wrap","_callee$","_context","prev","next","post","concat","name","userEmail","email","sent","console","log","prevProducts","filter","p","t0","error","stop","_x","apply","arguments","get","then","response","data","catch","className","children","to","onClick","length","map"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/User/FavoriteProducts.jsx"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useLocation } from \"react-router-dom\";\r\nimport CandyDisplay from \"../Products/CandyDisplay.jsx\";\r\nimport axios from 'axios';\r\nimport { UserContext } from \"./UserProvider.jsx\";\r\n\r\nconst FavoriteProducts = () => {\r\n  const { user } = useContext(UserContext);\r\n  const [favoriteProducts, setFavoriteProducts] = useState([]);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  const GoToAccount = () => {\r\n    navigate(\"/account\");\r\n  };\r\n\r\n  const removeFavorite = async (product) => {\r\n    try {\r\n      const removeSuccess = await axios.post(\r\n        `http://localhost:4000/api/users/favorite/${product.name}/remove`,\r\n        { userEmail: user.email, product }\r\n      );\r\n      if (removeSuccess) {\r\n        console.log(\"Removed from favorites\");\r\n        setFavoriteProducts((prevProducts) =>\r\n          prevProducts.filter((p) => p.name !== product.name)\r\n        );\r\n      } else {\r\n        console.log(\"Failed to remove from favorites\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error removing from favorites:\", error);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (!user) return;\r\n\r\n    axios.get(`http://localhost:4000/api/users/${user.email}/favorites`)\r\n      .then((response) => {\r\n        setFavoriteProducts(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"Error retrieving favorite products:\", error);\r\n      });\r\n  }, [location, user]);\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"notLoggedIn\">\r\n        <h1>You are not logged in.</h1>\r\n        <p>\r\n          Please <Link to=\"/account\">login</Link> to view your favorite products.\r\n        </p>\r\n        <button onClick={GoToAccount}>Go to login page</button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (favoriteProducts.length === 0) {\r\n    return (\r\n      <div>\r\n        <h1>You currently do not have any favorite products</h1>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"allProducts\">\r\n      {favoriteProducts.map((product) => (\r\n        <div className=\"reviewProduct\">\r\n          <CandyDisplay product={product} />\r\n          <button onClick={() => removeFavorite(product)}>Remove from Favorites</button>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default FavoriteProducts;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}