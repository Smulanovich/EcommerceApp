{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santi\\\\Documents\\\\CLASSES\\\\2022-2023\\\\SPRING_2023\\\\CS_35L\\\\Group_Project\\\\E-commerce_App\\\\Test\\\\EcommerceApp\\\\ecommerceapp\\\\client\\\\src\\\\pages\\\\Cart\\\\CartProvider.jsx\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from \"react\";\nimport localforage from \"localforage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nfunction CartProvider(_ref) {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cartItems, setCartItems] = useState([]);\n  useEffect(() => {\n    localforage.getItem(\"cartItems\").then(storedCartItems => {\n      if (storedCartItems) {\n        setCartItems(storedCartItems);\n      }\n    });\n  }, []);\n  useEffect(() => {\n    localforage.setItem(\"cartItems\", cartItems);\n  }, [cartItems]);\n  const addToCart = item => {\n    const existingItem = cartItems.find(cartItem => cartItem[0].name === item.name);\n    if (existingItem) {\n      const updatedCartItems = cartItems.map(cartItem => {\n        if (cartItem[0].name === item.name) {\n          return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\n        }\n\n        return cartItem;\n      });\n      setCartItems(updatedCartItems);\n    } else {\n      setCartItems([...cartItems, [item, 1]]);\n    }\n  };\n  const removeFromCart = name => {\n    const updatedCartItems = cartItems.filter(cartItem => cartItem[0].name !== name);\n    setCartItems(updatedCartItems);\n  };\n  const incrementItem = name => {\n    const updatedCartItems = cartItems.map(cartItem => {\n      if (cartItem[0].name === name) {\n        return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\n      }\n\n      return cartItem;\n    });\n    setCartItems(updatedCartItems);\n  };\n  const decrementItem = name => {\n    const updatedCartItems = cartItems.map(cartItem => {\n      if (cartItem[0].name === name) {\n        const newQuantity = cartItem[1] - 1;\n        if (newQuantity <= 0) {\n          return null; // Remove item from cart\n        }\n\n        return [cartItem[0], newQuantity];\n      }\n      return cartItem;\n    });\n    setCartItems(updatedCartItems.filter(Boolean)); // Remove null entries\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n    localforage.removeItem(\"cartItems\");\n  };\n  const getCartSize = () => {\n    return cartItems.reduce((total, cartItem) => total + cartItem[1], 0);\n  };\n  const calculateTotalAmount = () => {\n    return cartItems.reduce((total, cartItem) => total + cartItem[0].price * cartItem[1], 0);\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cartItems,\n      addToCart,\n      removeFromCart,\n      incrementItem,\n      decrementItem,\n      clearCart,\n      getCartSize,\n      calculateTotalAmount\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"jdONvkEabzLc64SbXgqXBHRMg9M=\");\n_c = CartProvider;\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","localforage","jsxDEV","_jsxDEV","CartContext","CartProvider","_ref","_s","children","cartItems","setCartItems","getItem","then","storedCartItems","setItem","addToCart","item","existingItem","find","cartItem","name","updatedCartItems","map","removeFromCart","filter","incrementItem","decrementItem","newQuantity","Boolean","clearCart","removeItem","getCartSize","reduce","total","calculateTotalAmount","price","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/Test/EcommerceApp/ecommerceapp/client/src/pages/Cart/CartProvider.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport localforage from \"localforage\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nfunction CartProvider({ children }) {\r\n  const [cartItems, setCartItems] = useState([]);\r\n\r\n  useEffect(() => {\r\n\r\n    localforage.getItem(\"cartItems\").then((storedCartItems) => {\r\n      if (storedCartItems) {\r\n        setCartItems(storedCartItems);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localforage.setItem(\"cartItems\", cartItems);\r\n  }, [cartItems]);\r\n\r\n  const addToCart = (item) => {\r\n    const existingItem = cartItems.find((cartItem) => cartItem[0].name === item.name);\r\n    if (existingItem) {\r\n      const updatedCartItems = cartItems.map((cartItem) => {\r\n        if (cartItem[0].name === item.name) {\r\n          return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\r\n        }\r\n        return cartItem;\r\n      });\r\n      setCartItems(updatedCartItems);\r\n    } else {\r\n      setCartItems([...cartItems, [item, 1]]);\r\n    }\r\n  };\r\n\r\n  const removeFromCart = (name) => {\r\n    const updatedCartItems = cartItems.filter((cartItem) => cartItem[0].name !== name);\r\n    setCartItems(updatedCartItems);\r\n  };\r\n\r\n  const incrementItem = (name) => {\r\n    const updatedCartItems = cartItems.map((cartItem) => {\r\n      if (cartItem[0].name === name) {\r\n        return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\r\n      }\r\n      return cartItem;\r\n    });\r\n    setCartItems(updatedCartItems);\r\n  };\r\n\r\n  const decrementItem = (name) => {\r\n    const updatedCartItems = cartItems.map((cartItem) => {\r\n      if (cartItem[0].name === name) {\r\n        const newQuantity = cartItem[1] - 1;\r\n        if (newQuantity <= 0) {\r\n          return null; // Remove item from cart\r\n        }\r\n        return [cartItem[0], newQuantity];\r\n      }\r\n      return cartItem;\r\n    });\r\n    setCartItems(updatedCartItems.filter(Boolean)); // Remove null entries\r\n  };\r\n\r\n  const clearCart = () => {\r\n    setCartItems([]);\r\n    localforage.removeItem(\"cartItems\");\r\n  };\r\n\r\n  const getCartSize = () => {\r\n    return cartItems.reduce((total, cartItem) => total + cartItem[1], 0);\r\n  };\r\n\r\n  const calculateTotalAmount = () => {\r\n    return cartItems.reduce((total, cartItem) => total + cartItem[0].price * cartItem[1], 0);\r\n  };\r\n\r\n  return (\r\n    <CartContext.Provider\r\n      value={{\r\n        cartItems,\r\n        addToCart,\r\n        removeFromCart,\r\n        incrementItem,\r\n        decrementItem,\r\n        clearCart,\r\n        getCartSize,\r\n        calculateTotalAmount,\r\n      }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n}\r\n\r\nexport default CartProvider;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}