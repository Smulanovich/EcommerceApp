{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from\"react\";import{useContext}from'react';import axios from\"axios\";import{UserContext}from\"./UserProvider.jsx\";import{useNavigate}from\"react-router-dom\";import\"./LoggedInUser.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoggedInUser=function LoggedInUser(){var _useContext=useContext(UserContext),user=_useContext.user,logout=_useContext.logout;var navigate=useNavigate();var DeleteAccount=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var deleteSucces;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.post(\"http://localhost:4000/api/users/\".concat(user.email,\"/delete\"));case 3:deleteSucces=_context.sent;if(deleteSucces){console.log(\"Account deleted\");logout();}else{console.log(\"Failed to delete account\");}_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error deleting account:\",_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function DeleteAccount(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"loggedInUser\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Logged in as:\"}),/*#__PURE__*/_jsxs(\"h4\",{children:[user.firstName,\" \",user.lastName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"email: \",user.email]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return logout();},children:\"Logout\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return DeleteAccount();},children:\"Delete account\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/account/orders');},children:\"View Order History\"})]});};export default LoggedInUser;","map":{"version":3,"names":["React","useContext","axios","UserContext","useNavigate","jsx","_jsx","jsxs","_jsxs","LoggedInUser","_useContext","user","logout","navigate","DeleteAccount","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","deleteSucces","wrap","_callee$","_context","prev","next","post","concat","email","sent","console","log","t0","error","stop","apply","arguments","className","children","firstName","lastName","onClick"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/User/LoggedInUser.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useContext } from 'react';\r\nimport axios from \"axios\";\r\nimport { UserContext } from \"./UserProvider.jsx\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./LoggedInUser.css\";\r\n\r\n\r\nconst LoggedInUser = () => {\r\n\r\n    const { user, logout } = useContext(UserContext);\r\n    const navigate = useNavigate();\r\n    const DeleteAccount = async () => {\r\n        try {\r\n            const deleteSucces = await axios.post(`http://localhost:4000/api/users/${user.email}/delete`);\r\n            if (deleteSucces) {\r\n                console.log(\"Account deleted\");\r\n                logout();\r\n            }\r\n            else {\r\n                console.log(\"Failed to delete account\");\r\n            }\r\n        }\r\n        catch (error) {\r\n            console.error(\"Error deleting account:\", error);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"loggedInUser\">\r\n            <h3>Logged in as:</h3>\r\n            <h4>{user.firstName} {user.lastName}</h4>\r\n            <p>email: {user.email}</p>\r\n            <button onClick={() => logout()}>Logout</button>\r\n            <button onClick={() => DeleteAccount()}>Delete account</button>\r\n            <button onClick={() => navigate('/account/orders')}>View Order History</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LoggedInUser;"],"mappings":"kbAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,oBAAoB,CAChD,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,oBAAoB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG5B,GAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CAEvB,IAAAC,WAAA,CAAyBT,UAAU,CAACE,WAAW,CAAC,CAAxCQ,IAAI,CAAAD,WAAA,CAAJC,IAAI,CAAEC,MAAM,CAAAF,WAAA,CAANE,MAAM,CACpB,GAAM,CAAAC,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAC9B,GAAM,CAAAU,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,YAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEa,CAAAvB,KAAK,CAACwB,IAAI,oCAAAC,MAAA,CAAoChB,IAAI,CAACiB,KAAK,WAAS,CAAC,QAAvFR,YAAY,CAAAG,QAAA,CAAAM,IAAA,CAClB,GAAIT,YAAY,CAAE,CACdU,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAC9BnB,MAAM,CAAC,CAAC,CACZ,CAAC,IACI,CACDkB,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAC,CAC3C,CAACR,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,aAGDO,OAAO,CAACG,KAAK,CAAC,yBAAyB,CAAAV,QAAA,CAAAS,EAAO,CAAC,CAAC,yBAAAT,QAAA,CAAAW,IAAA,MAAAf,OAAA,gBAEvD,kBAdK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAclB,CAED,mBACI5B,KAAA,QAAK6B,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBhC,IAAA,OAAAgC,QAAA,CAAI,eAAa,CAAI,CAAC,cACtB9B,KAAA,OAAA8B,QAAA,EAAK3B,IAAI,CAAC4B,SAAS,CAAC,GAAC,CAAC5B,IAAI,CAAC6B,QAAQ,EAAK,CAAC,cACzChC,KAAA,MAAA8B,QAAA,EAAG,SAAO,CAAC3B,IAAI,CAACiB,KAAK,EAAI,CAAC,cAC1BtB,IAAA,WAAQmC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA7B,MAAM,CAAC,CAAC,EAAC,CAAA0B,QAAA,CAAC,QAAM,CAAQ,CAAC,cAChDhC,IAAA,WAAQmC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA3B,aAAa,CAAC,CAAC,EAAC,CAAAwB,QAAA,CAAC,gBAAc,CAAQ,CAAC,cAC/DhC,IAAA,WAAQmC,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAA5B,QAAQ,CAAC,iBAAiB,CAAC,EAAC,CAAAyB,QAAA,CAAC,oBAAkB,CAAQ,CAAC,EAC9E,CAAC,CAEd,CAAC,CAED,cAAe,CAAA7B,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}