{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from\"react\";import axios from\"axios\";import{useLocation,useParams,Link,useNavigate}from\"react-router-dom\";import CandyDisplay from\"./CandyDisplay.jsx\";import{UserContext}from\"../../pages/User/UserProvider.jsx\";import{CartContext}from\"../Cart/CartProvider.jsx\";import ViewReviewsButton from\"./ViewReviewsButton.jsx\";import\"./ProductDisplay.css\";import favoritesImage from\"../../images/addedToFavorites.png\";import Footer from\"../../components/Footer/Footer.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductDisplay(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var location=useLocation();var _useParams=useParams(),productType=_useParams.productType;var _useContext=useContext(UserContext),user=_useContext.user;var navigate=useNavigate();var AddToFavorites=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(product){var userEmail,addSuccess;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(\"User: \",user);if(user){_context.next=6;break;}console.log(\"User not logged in\");alert(\"Please log in to add to favorites\");navigate(\"/account\");return _context.abrupt(\"return\");case 6:userEmail=user.email;_context.prev=7;_context.next=10;return axios.post(\"http://localhost:4000/api/users/favorite/\".concat(product.name,\"/add\"),{userEmail:userEmail,product:product});case 10:addSuccess=_context.sent;if(addSuccess){console.log(\"Added to favorites\");showFavoritesMessage();}else{console.log(\"Failed to add to favorites\");}_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](7);console.error(\"Error adding to favorites:\",_context.t0);case 17:case\"end\":return _context.stop();}},_callee,null,[[7,14]]);}));return function AddToFavorites(_x){return _ref.apply(this,arguments);};}();var showFavoritesMessage=function showFavoritesMessage(){var favoritesMessage=document.getElementById(\"favoritesMessage\");favoritesMessage.style.display=\"block\";setTimeout(function(){favoritesMessage.style.display=\"none\";},3000);};useEffect(function(){// Make the HTTP request to fetch the products\naxios.get(\"http://localhost:4000/api/products/\".concat(productType)).then(function(response){setProducts(response.data);}).catch(function(error){console.error(\"Error retrieving products:\",error);});},[productType,location]);if(!products){console.error(\"Error: Items could not be retrieved.\");return/*#__PURE__*/_jsx(\"div\",{className:\"retrError\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"Error: Items could not be retrieved\"})});}console.log(\"User: \",user);return/*#__PURE__*/_jsxs(\"div\",{className:\"productPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"allProducts\",children:[products.map(function(product){return/*#__PURE__*/_jsxs(\"div\",{className:\"productContainer\",children:[/*#__PURE__*/_jsx(CandyDisplay,{product:product}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonContainer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"Favorites\",onClick:function onClick(){return AddToFavorites(product);},children:/*#__PURE__*/_jsx(\"img\",{src:favoritesImage,alt:\"Favorites\",className:\"favoritesImage\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"reviews\",children:/*#__PURE__*/_jsx(ViewReviewsButton,{productName:product.name})})]})]});}),/*#__PURE__*/_jsx(\"div\",{id:\"favoritesMessage\",className:\"favoritesMessage\",children:\"Item added to favorites\"})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default ProductDisplay;","map":{"version":3,"names":["React","useEffect","useState","useContext","axios","useLocation","useParams","Link","useNavigate","CandyDisplay","UserContext","CartContext","ViewReviewsButton","favoritesImage","Footer","jsx","_jsx","jsxs","_jsxs","ProductDisplay","_useState","_useState2","_slicedToArray","products","setProducts","location","_useParams","productType","_useContext","user","navigate","AddToFavorites","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","product","userEmail","addSuccess","wrap","_callee$","_context","prev","next","console","log","alert","abrupt","email","post","concat","name","sent","showFavoritesMessage","t0","error","stop","_x","apply","arguments","favoritesMessage","document","getElementById","style","display","setTimeout","get","then","response","data","catch","className","children","map","onClick","src","alt","productName","id"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/Products/ProductDisplay.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport axios from \"axios\";\nimport { useLocation, useParams, Link, useNavigate } from \"react-router-dom\";\nimport CandyDisplay from \"./CandyDisplay.jsx\";\nimport { UserContext } from \"../../pages/User/UserProvider.jsx\";\nimport { CartContext } from \"../Cart/CartProvider.jsx\";\nimport ViewReviewsButton from \"./ViewReviewsButton.jsx\";\nimport \"./ProductDisplay.css\";\nimport favoritesImage from \"../../images/addedToFavorites.png\";\nimport Footer from \"../../components/Footer/Footer.jsx\";\n\nfunction ProductDisplay() {\n  const [products, setProducts] = useState([]);\n  const location = useLocation();\n  const { productType } = useParams();\n  const { user } = useContext(UserContext);\n  const navigate = useNavigate();\n\n  const AddToFavorites = async (product) => {\n    console.log(\"User: \", user);\n    if (!user) {\n      console.log(\"User not logged in\");\n      alert(\"Please log in to add to favorites\");\n      navigate(\"/account\");\n      return;\n    }\n    const userEmail = user.email;\n    try {\n      const addSuccess = await axios.post(\n        `http://localhost:4000/api/users/favorite/${product.name}/add`,\n        { userEmail, product }\n      );\n      if (addSuccess) {\n        console.log(\"Added to favorites\");\n        showFavoritesMessage();\n      } else {\n        console.log(\"Failed to add to favorites\");\n      }\n    } catch (error) {\n      console.error(\"Error adding to favorites:\", error);\n    }\n  };\n\n  const showFavoritesMessage = () => {\n    const favoritesMessage = document.getElementById(\"favoritesMessage\");\n    favoritesMessage.style.display = \"block\";\n    setTimeout(() => {\n      favoritesMessage.style.display = \"none\";\n    }, 3000);\n  };\n\n  useEffect(() => {\n    // Make the HTTP request to fetch the products\n    axios\n      .get(`http://localhost:4000/api/products/${productType}`)\n      .then((response) => {\n        setProducts(response.data);\n      })\n      .catch((error) => {\n        console.error(\"Error retrieving products:\", error);\n      });\n  }, [productType, location]);\n\n  if (!products) {\n    console.error(\"Error: Items could not be retrieved.\");\n    return (\n      <div className=\"retrError\">\n        <h1>Error: Items could not be retrieved</h1>\n      </div>\n    );\n  }\n\n  console.log(\"User: \", user);\n  return (\n    <div className=\"productPage\">\n      <div className=\"allProducts\">\n      {products.map((product) => (\n        <div className=\"productContainer\">\n          <CandyDisplay product={product} />\n          <div className=\"buttonContainer\">\n            <button className=\"Favorites\" onClick={() => AddToFavorites(product)}>\n              <img src={favoritesImage} alt=\"Favorites\" className=\"favoritesImage\" />\n            </button>\n            <div className=\"reviews\">\n              <ViewReviewsButton productName={product.name} />\n            </div>\n          </div>\n        </div>\n      ))}\n      <div id=\"favoritesMessage\" className=\"favoritesMessage\">\n        Item added to favorites\n      </div>\n      </div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default ProductDisplay;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}