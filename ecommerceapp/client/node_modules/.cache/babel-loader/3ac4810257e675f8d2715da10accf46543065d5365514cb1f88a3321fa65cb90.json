{"ast":null,"code":"import _toConsumableArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{createContext,useState,useEffect}from\"react\";import localforage from\"localforage\";import{jsx as _jsx}from\"react/jsx-runtime\";export var CartContext=/*#__PURE__*/createContext();function CartProvider(_ref){var children=_ref.children;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cartItems=_useState2[0],setCartItems=_useState2[1];useEffect(function(){localforage.getItem(\"cartItems\").then(function(storedCartItems){if(storedCartItems){setCartItems(storedCartItems);}});},[]);useEffect(function(){localforage.setItem(\"cartItems\",cartItems);},[cartItems]);var addToCart=function addToCart(item){var existingItem=cartItems.find(function(cartItem){return cartItem[0].name===item.name;});if(existingItem){var updatedCartItems=cartItems.map(function(cartItem){if(cartItem[0].name===item.name){return[cartItem[0],cartItem[1]+1];// Increase quantity by 1\n}return cartItem;});setCartItems(updatedCartItems);}else{setCartItems([].concat(_toConsumableArray(cartItems),[[item,1]]));}};var removeFromCart=function removeFromCart(name){var updatedCartItems=cartItems.filter(function(cartItem){return cartItem[0].name!==name;});setCartItems(updatedCartItems);};var incrementItem=function incrementItem(name){var updatedCartItems=cartItems.map(function(cartItem){if(cartItem[0].name===name){return[cartItem[0],cartItem[1]+1];// Increase quantity by 1\n}return cartItem;});setCartItems(updatedCartItems);};var decrementItem=function decrementItem(name){var updatedCartItems=cartItems.map(function(cartItem){if(cartItem[0].name===name){var newQuantity=cartItem[1]-1;if(newQuantity<=0){return null;// Remove item from cart\n}return[cartItem[0],newQuantity];}return cartItem;});setCartItems(updatedCartItems.filter(Boolean));// Remove null entries\n};var clearCart=function clearCart(){setCartItems([]);localforage.removeItem(\"cartItems\");};var getCartSize=function getCartSize(){return cartItems.reduce(function(total,cartItem){return total+cartItem[1];},0);};var calculateTotalAmount=function calculateTotalAmount(){return cartItems.reduce(function(total,cartItem){return total+cartItem[0].price*cartItem[1];},0);};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItems:cartItems,addToCart:addToCart,removeFromCart:removeFromCart,incrementItem:incrementItem,decrementItem:decrementItem,clearCart:clearCart,getCartSize:getCartSize,calculateTotalAmount:calculateTotalAmount},children:children});}export default CartProvider;","map":{"version":3,"names":["React","createContext","useState","useEffect","localforage","jsx","_jsx","CartContext","CartProvider","_ref","children","_useState","_useState2","_slicedToArray","cartItems","setCartItems","getItem","then","storedCartItems","setItem","addToCart","item","existingItem","find","cartItem","name","updatedCartItems","map","concat","_toConsumableArray","removeFromCart","filter","incrementItem","decrementItem","newQuantity","Boolean","clearCart","removeItem","getCartSize","reduce","total","calculateTotalAmount","price","Provider","value"],"sources":["C:/Users/santi/Documents/CLASSES/2022-2023/SPRING_2023/CS_35L/Group_Project/E-commerce_App/EcommerceApp/ecommerceapp/client/src/pages/Cart/CartProvider.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\nimport localforage from \"localforage\";\n\nexport const CartContext = createContext();\n\nfunction CartProvider({ children }) {\n  const [cartItems, setCartItems] = useState([]);\n\n  useEffect(() => {\n\n    localforage.getItem(\"cartItems\").then((storedCartItems) => {\n      if (storedCartItems) {\n        setCartItems(storedCartItems);\n      }\n    });\n  }, []);\n\n  useEffect(() => {\n    localforage.setItem(\"cartItems\", cartItems);\n  }, [cartItems]);\n\n  const addToCart = (item) => {\n    const existingItem = cartItems.find((cartItem) => cartItem[0].name === item.name);\n    if (existingItem) {\n      const updatedCartItems = cartItems.map((cartItem) => {\n        if (cartItem[0].name === item.name) {\n          return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\n        }\n        return cartItem;\n      });\n      setCartItems(updatedCartItems);\n    } else {\n      setCartItems([...cartItems, [item, 1]]);\n    }\n  };\n\n  const removeFromCart = (name) => {\n    const updatedCartItems = cartItems.filter((cartItem) => cartItem[0].name !== name);\n    setCartItems(updatedCartItems);\n  };\n\n  const incrementItem = (name) => {\n    const updatedCartItems = cartItems.map((cartItem) => {\n      if (cartItem[0].name === name) {\n        return [cartItem[0], cartItem[1] + 1]; // Increase quantity by 1\n      }\n      return cartItem;\n    });\n    setCartItems(updatedCartItems);\n  };\n\n  const decrementItem = (name) => {\n    const updatedCartItems = cartItems.map((cartItem) => {\n      if (cartItem[0].name === name) {\n        const newQuantity = cartItem[1] - 1;\n        if (newQuantity <= 0) {\n          return null; // Remove item from cart\n        }\n        return [cartItem[0], newQuantity];\n      }\n      return cartItem;\n    });\n    setCartItems(updatedCartItems.filter(Boolean)); // Remove null entries\n  };\n\n  const clearCart = () => {\n    setCartItems([]);\n    localforage.removeItem(\"cartItems\");\n  };\n\n  const getCartSize = () => {\n    return cartItems.reduce((total, cartItem) => total + cartItem[1], 0);\n  };\n\n  const calculateTotalAmount = () => {\n    return cartItems.reduce((total, cartItem) => total + cartItem[0].price * cartItem[1], 0);\n  };\n\n  return (\n    <CartContext.Provider\n      value={{\n        cartItems,\n        addToCart,\n        removeFromCart,\n        incrementItem,\n        decrementItem,\n        clearCart,\n        getCartSize,\n        calculateTotalAmount,\n      }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport default CartProvider;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}